<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="LG Electronics America R&D Center">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Traffic behavior plugins - SVL Simulator</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Traffic behavior plugins";
    var mkdocs_page_input_path = "npc-plugins.md";
    var mkdocs_page_url = "/npc-plugins/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-130546445-1', 'svlsimulator.com/docs');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <!-- edit link, open in new tab -->
        <a href="https://www.svlsimulator.com" class="icon icon-home" target="_blank_"> SVL Simulator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Quick start</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../getting-started/">Getting started</a>
                </li>
                <li class="">
                    
    <a class="" href="../keyboard-shortcuts/">Keyboard shortcuts</a>
                </li>
                <li class="">
                    
    <a class="" href="../changelog/">Release notes</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Web User Interface</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../maps-tab/">Maps</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../vehicles-tab/">Vehicles</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../sensor-json-options/">Sensor parameters</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../clusters-tab/">Clusters</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../simulations-tab/">Simulations</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Simulation User Interface</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../simulation-menu/">Menu items</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../sensor-visualizers/">Sensor visualization</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../bridge-connection-ui/">Bridge topics</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../config-and-cmd-line-params/">Configuration File and Command Line Parameters</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Integration with AD</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Running with Autoware.AI</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../autoware-instructions/">Instructions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../autoware-json-example/">Sample sensor configuration</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Running with Autoware.Auto</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../autoware-auto-instructions/">Instructions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../autoware-auto-json-example/">Sample sensor configuration</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Running with latest Apollo</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../apollo-master-instructions/">Instructions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../modular-testing/">Modular testing</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Running with Apollo 5.0</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../apollo5-0-instructions/">Instructions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../apollo5-0-json-example/">Sample sensor configuration</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Running with Apollo 3.0</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../apollo-instructions/">Instructions</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../apollo-json-example/">Sample sensor configuration</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">SVL ROS/ROS2 Message Definitions</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../lgsvl-msgs/">The lgsvl_msgs package</a>
                </li>
                <li class="toctree-l3">
                    
    <span class="caption-text">Ground truth obstacles</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="../perception-ground-truth/">Viewing and subscribing to ground truth data</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../ground-truth-json-example/">Sample sensor configuration for data collection</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Python API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../python-api/">Python API guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../api-quickstart-descriptions/">Python API quickstart examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../api-example-descriptions/">Python API use case examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../api-how-to-run-scenario/">How to run a scenario</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../openai-gym/">Reinforcement learning with OpenAI Gym</a>
                </li>
                <li class="">
                    
    <a class="" href="../lane-following/">Deep Learning lane following model</a>
                </li>
                <li class="">
                    
    <a class="" href="../create-ros2-ad-stack/">How to create a simple ROS2-based AD stack</a>
                </li>
                <li class="">
                    
    <a class="" href="../control-calibration/">How to collect data with control calibration sensor</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Advanced</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../simulator-messages/">Supported message types</a>
                </li>
                <li class="">
                    
    <a class="" href="../simulator-coordinate-system/">Simulator coordinate system</a>
                </li>
                <li class="">
                    
    <a class="" href="../map-annotation/">Map annotation</a>
                </li>
                <li class="">
                    
    <a class="" href="../build-instructions/">Build instructions</a>
                </li>
                <li class="">
                    
    <a class="" href="../assets/">Adding assets</a>
                </li>
                <li class="">
                    
    <a class="" href="../add-new-map/">Adding a new map</a>
                </li>
                <li class="">
                    
    <a class="" href="../add-new-ego-vehicle/">Adding a new ego vehicle</a>
                </li>
                <li class="">
                    
    <a class="" href="../npc-map-navigation/">NPC map navigation</a>
                </li>
                <li class="">
                    
    <a class="" href="../ros2-bridge/">Setting up ROS 2 bridge</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Plugins</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../sensor-plugins/">Sensor plugins</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../lidar-plugin/">Lidar sensor plugin</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../bridge-plugins/">Bridge plugins</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../controllable-plugins/">Controllable plugins</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Traffic behavior plugins</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#npc-models">NPC Models</a></li>
    

    <li class="toctree-l4"><a href="#building-npc-plugins">Building NPC Plugins</a></li>
    

    <li class="toctree-l4"><a href="#npc-behaviors">NPC Behaviors</a></li>
    

    <li class="toctree-l4"><a href="#creating-npc-behavior-plugins">Creating NPC Behavior Plugins</a></li>
    

    <li class="toctree-l4"><a href="#creating-npc-model-plugins">Creating NPC Model Plugins</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#npc-meta-data">NPC Meta Data</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../ego-vehicle-dynamics/">Vehicle dynamics</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Point cloud</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../pointcloud-import/">Point cloud import</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../pointcloud-rendering/">Point cloud rendering</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../unity-help/">Unity help</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Support</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../troubleshooting/">Troubleshooting</a>
                </li>
                <li class="">
                    
    <a class="" href="../faq/">FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../contributing/">Contributing</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SVL Simulator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Plugins &raquo;</li>
        
      
        
          <li>Advanced &raquo;</li>
        
      
    
    <li>Traffic behavior plugins</li>
    <li class="wy-breadcrumbs-aside">
      
      <!-- edited to not display Github edit link -->
        <a style="display:none;" href="https://github.com/lgsvl/simulator/edit/master/Docs/npc-plugins.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1>NPC Plugins <a href="#top"></a></h1>
<p>With NPC (non player character, that is non ego traffic) plugins we added the ability to customize the appearance and behavior of NPC vehicles in your simulations to allow you to add local variations of vehicle styles and brands or implement encounters with vehicles displaying distinguished behaviors such as erratic driving or vehicles stopping frequently like deliveries or trash pick up.</p>
<h2> Table of Contents</h2>

<div class="toc">
<ul>
<li><a href="#npc-models">NPC Models</a></li>
<li><a href="#building-npc-plugins">Building NPC Plugins</a></li>
<li><a href="#npc-behaviors">NPC Behaviors</a></li>
<li><a href="#creating-npc-behavior-plugins">Creating NPC Behavior Plugins</a></li>
<li><a href="#creating-npc-model-plugins">Creating NPC Model Plugins</a><ul>
<li><a href="#npc-meta-data">NPC Meta Data</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="npc-models">NPC Models<a class="headerlink" href="#npc-models" title="Permanent link">#</a></h2>
<p>NPC Models allow customization of NPC visuals, most notably the 3D model of vehicles, but also the material used for the car paint or windows.
With supporting custom NPC models we also added the support for motorbikes and vehicles with more two axles as well as more than one steering axle as is found on heavy vehicles.</p>
<p>We classify NPCs into size categories which decide the spawning frequency as well as which paint colors are more common for which NPC size type.
The following table lists all currently implemented size types and the weight that correlates to their relative probability of encountering this type.</p>
<table>
<thead>
<tr>
<th>NPC Size Type</th>
<th>exemplary spawning weight</th>
</tr>
</thead>
<tbody>
<tr>
<td>Compact</td>
<td>5</td>
</tr>
<tr>
<td>MidSize</td>
<td>6</td>
</tr>
<tr>
<td>Luxury</td>
<td>2</td>
</tr>
<tr>
<td>Sport</td>
<td>1</td>
</tr>
<tr>
<td>LightTruck</td>
<td>2</td>
</tr>
<tr>
<td>SUV</td>
<td>4</td>
</tr>
<tr>
<td>MiniVan</td>
<td>3</td>
</tr>
<tr>
<td>Large</td>
<td>2</td>
</tr>
<tr>
<td>Emergency</td>
<td>1</td>
</tr>
<tr>
<td>Bus</td>
<td>1</td>
</tr>
<tr>
<td>Trailer</td>
<td>0</td>
</tr>
<tr>
<td>Motorcycle</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>In this example, trailer type has a weight of zero, indicating that it should not spawn by itself, while MidSize type has the highest weight, indicating that it is the most frequent vehicle on the road. The NPC Type is configured via a <a href="#npc-meta-data">Component added to the root of the prefab</a>.</p>
<p>Similarily, colors for each spawned vehicle is picked from a table for each vehicle type.</p>
<p>In offline mode, NPC models are detected from <code>&lt;simulator installation path&gt;/AssetBundles/NPCs</code> and added to the simulation automatically.</p>
<h2 id="building-npc-plugins">Building NPC Plugins <a class="wikilink" href="#top">top</a><a class="headerlink" href="#building-npc-plugins" title="Permanent link">#</a></h2>
<p>NPCs are grouped into collections to allow you to import regional collections of vehicles. This means that you can place e.g. <code>NorthAmericaNPCs</code> at  beneath the NPC source folder at <code>&lt;simulator source root&gt;/Assets/External/NPCs</code> to have all NorthAmericaNPCs vehicles show up in the build menu in a group.</p>
<p>To build AssetBundles of NPCs,</p>
<ol>
<li>Open <code>Simulator -&gt; Build...</code> menu item</li>
<li>Select behaviors in  e.g. "NPCs/NorthAmericaNPCs" section of build window</li>
<li>Build plugins with "Build" button</li>
</ol>
<p><a href="../images/full_size_images/build-npcs.png"><img alt="" src="../images/build-npcs.png" /></a></p>
<p>The bundle named <code>npc_XXX</code> will be placed in the <code>AssetBundles/NPCs/&lt;COLLECTION&gt;</code> folder. If building the binary, this folder is included in the target destination.</p>
<p>See <a href="build-instructions">build instructions</a> for more details.</p>
<h2 id="npc-behaviors">NPC Behaviors<a class="headerlink" href="#npc-behaviors" title="Permanent link">#</a></h2>
<p>NPC Behaviors allow NPC Vehicles to behave in custom ways different from the provided builtin NPC behavior and are enabled and configured through the Python API.</p>
<p>Before running the simulator (running the executable or pressing <code>Play</code> in the Editor) NPC behavior plugins must be built by the simulator using <code>Simulator -&gt; Build...</code> menu and the built asset placed in the <code>AssetBundles/NPCs</code> folder.</p>
<p>Open-source example:</p>
<ul>
<li><a href="https://github.com/lgsvl/ExampleNPCs/DrunkDriver">DrunkDriver</a></li>
</ul>
<h2 id="creating-npc-behavior-plugins">Creating NPC Behavior Plugins <a class="wikilink" href="#top">top</a><a class="headerlink" href="#creating-npc-behavior-plugins" title="Permanent link">#</a></h2>
<p>Create a folder in under your collection folder for each behavior, eg. <code>Assets/External/NPCs/ExampleNPCs/DrunkDriver</code>.</p>
<p>If your plugin is a pure behavior, that is it has no visual components, we require one C# file to have the same name as the folder under the collection folder, for example note how the name <code>DrunkDriver</code> repeats in both the folder name and file name: <code>Assets/External/NPCs/ExampleNPCs/DrunkDriver/DrunkDriver.cs</code>.</p>
<p>The main class has to inherit from <code>NPCBehaviourBase</code> and implement its abstract methods to hook into the NPC simulation framework. It is also possible to inherit from <code>NPCLaneFollowingBehaviour</code> if you want to implement a slight modification of the default lane following behavior, such as this simple <code>DrunkDriver</code> example:</p>
<pre><code class="c#">using System.Collections;
using System.Collections.Generic;

using UnityEngine;
using Simulator.Api;
using Simulator.Map;
using Simulator.Utilities;
using SimpleJSON;

// In this example, we try to simulate a driver under ther influence of alcohol.
// We modify the default NPCLaneFollowingBehaviour because in principle this behavior
// shuld just add variation the the default behavior.
public class NPCDrunkDriverBehaviour : NPCLaneFollowBehaviour
{
    public float steerCorrectionMinTime = 0.0f;
    public float steerCorrectionMaxTime = 0.4f;

    public float steerDriftMin = 0.00f;
    public float steerDriftMax = 0.09f;

    protected float currentSteerDrift = 0.0f;
    protected float nextSteerCorrection = 0;
    // This function in the base class controls the NPC steering
    protected override void SetTargetTurn()
    {
        // we reduce the frequency at which steering is updated to the target heading to
        // simulate loss of attention or reduced reaction time
        if(nextSteerCorrection &lt; Time.fixedTime)
        {
            float steerCorrectionIn = RandomGenerator.NextFloat(steerCorrectionMinTime, steerCorrectionMaxTime);
            nextSteerCorrection = Time.fixedTime + steerCorrectionIn;

            // we add drift to the steering to simulate loss of fine motor skills
            currentSteerDrift = RandomGenerator.NextFloat(steerDriftMin, steerDriftMax);
            currentSteerDrift = currentSteerDrift * Mathf.Abs(RandomGenerator.NextFloat(-1.0f, 1.0f));
            // we can reuse the base steering at reduced frequency
            base.SetTargetTurn();
        }
        else
        {
            // steering drift correlating to driving speed
            currentTurn += currentSteerDrift * currentSpeed;
        }
    }
}
</code></pre>

<p>If you want to configure aspects of your NPC behavior from the Python API, you can add a class implementing the <code>ICommand</code> interface as shown in this example:</p>
<pre><code class="c#">class DrunkDriverControl : ICommand
{
    public string Name =&gt; &quot;agent/drunk/config&quot;;

    public void Execute(JSONNode args)
    {
        var uid = args[&quot;uid&quot;].Value;
        var api = ApiManager.Instance;

        if (!api.Agents.TryGetValue(uid, out GameObject npc))
        {
            api.SendError(this, $&quot;Agent '{uid}' not found&quot;);
            return;
        }

        var behaviour = npc.GetComponent&lt;NPCDrunkDriverBehaviour&gt;();
        if (behaviour == null)
        {
            api.SendError(this, $&quot;Agent '{uid}' is not a drunk driving NPC agent&quot;);
            return;
        }

        if(args.HasKey(&quot;correctionMinTime&quot;)) behaviour.steerCorrectionMinTime = args[&quot;correctionMinTime&quot;].AsFloat;
        if(args.HasKey(&quot;correctionMaxTime&quot;)) behaviour.steerCorrectionMaxTime = args[&quot;correctionMaxTime&quot;].AsFloat;
        if(args.HasKey(&quot;steerDriftMin&quot;)) behaviour.steerDriftMin = args[&quot;steerDriftMin&quot;].AsFloat;
        if(args.HasKey(&quot;steerDriftMax&quot;)) behaviour.steerDriftMax = args[&quot;steerDriftMax&quot;].AsFloat;

        api.SendResult(this);
    }
}
</code></pre>

<p>example usage from Python:</p>
<pre><code class="python"># common setup code omitted, check PythonAPI/quickstart for examples
# you can check if it has been loaded:
behaviours = sim.available_npc_behaviours
for i in range(len(behaviours)):
    if behaviours[i][&quot;name&quot;]==&quot;NPCDrunkDriverBehaviour&quot;: drunkDriverAvailable = True

#later...
npc = sim.add_agent(agent, lgsvl.AgentType.NPC, state)
if drunkDriverAvailable:
    inp = input(&quot;make drunk driver? yN&quot;)
if (inp == &quot;y&quot; or inp == &quot;Y&quot;):
    npc.set_behaviour(&quot;NPCDrunkDriverBehaviour&quot;)
    # usage of example command from C# plugin.
    npc.remote.command(&quot;agent/drunk/config&quot;, { &quot;uid&quot;: npc.uid, &quot;correctionMinTime&quot;:0.0, &quot;correctionMaxTime&quot;:0.6, &quot;steerDriftMin&quot;: 0.00, &quot;steerDriftMax&quot;:0.09})

# can still use lane following methods as those are inherited
npc.follow_closest_lane(True, 5.6)
</code></pre>

<h2 id="creating-npc-model-plugins">Creating NPC Model Plugins <a class="wikilink" href="#top">top</a><a class="headerlink" href="#creating-npc-model-plugins" title="Permanent link">#</a></h2>
<p>Create a folder in under your collection folder for each Model, eg. <code>Assets/External/NPCs/ExampleNPCs/DumpTruck</code>.
All assets of a NPC such as textures, additional materials or scripts are expected to live inside its folder.</p>
<p><a href="../images/full_size_images/npc-components.png"><img alt="" src="../images/npc-components.png" /></a></p>
<p>When an NPC is spawned, a NPCController script is attached to the root of the prefab instance, and it will try to find several components to animate the vehicle. To identify the components, we look at the Name property of the Components as follows:</p>
<table>
<thead>
<tr>
<th>GameObject Name contains...</th>
<th>Component Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Head</td>
<td>Light</td>
<td>headlights which are controlled by the NPCController to off, regular, high beam etc states</td>
</tr>
<tr>
<td>Brake</td>
<td>Light</td>
<td>braking lights, controlled by the NPCController to reflect the vehicle braking</td>
</tr>
<tr>
<td>IndicatorLeft</td>
<td>Light</td>
<td>left indicator lights controlled by the NPCController when turning or when hazard lights are on</td>
</tr>
<tr>
<td>IndicatorRight</td>
<td>Light</td>
<td>right indicator lights controlled by the NPCController when turning or when hazard lights are on</td>
</tr>
<tr>
<td>IndicatorReverse</td>
<td>Light</td>
<td>light turns on when NPC is reversing</td>
</tr>
<tr>
<td>Body</td>
<td>Renderer</td>
<td>Renderer used to generate MeshCollider for collision and raycast checks</td>
</tr>
<tr>
<td>Body</td>
<td>Material on any Renderer</td>
<td>this material will have its _BaseColor changed to give each NPC a random color from a list</td>
</tr>
<tr>
<td>LightHead</td>
<td>Material on any Renderer</td>
<td>a material which is controlled to emit light in conjunction with headlight Lights</td>
</tr>
<tr>
<td>LightBrake</td>
<td>Material on any Renderer</td>
<td>a material which is controlled to emit light in conjunction with brake Lights</td>
</tr>
<tr>
<td>IndicatorLeft</td>
<td>Material on any Renderer</td>
<td>a material which is controlled to emit light in conjunction with left indicator Lights</td>
</tr>
<tr>
<td>IndicatorRight</td>
<td>Material on any Renderer</td>
<td>a material which is controlled to emit light in conjunction with right indicator Lights</td>
</tr>
<tr>
<td>IndicatorReverse</td>
<td>Material on any Renderer</td>
<td>a material which is controlled to emit light in conjunction with reversing Light</td>
</tr>
<tr>
<td>Wheel</td>
<td>Renderer</td>
<td>Renderer is converted to Wheel. NPCs with less than four wheels are assumed to be bikes and will try to stay upright by applying a force each physics update</td>
</tr>
<tr>
<td>"Wheel" and "Front"</td>
<td>Renderer</td>
<td>wheels that are supposed to turn when steering</td>
</tr>
</tbody>
</table>
<h3 id="npc-meta-data">NPC Meta Data<a class="headerlink" href="#npc-meta-data" title="Permanent link">#</a></h3>
<p>Additional informaton about the NPC prefab is added by attaching a Unity <code>MonoBehaviour</code> Component called <code>NPCMetaData</code> added to each prefab.</p>
<p><a href="../images/full_size_images/npc-metadata.png"><img alt="" src="../images/npc-metadata.png" /></a></p>
<p>Currently, only NPC size type is specified here.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ego-vehicle-dynamics/" class="btn btn-neutral float-right" title="Vehicle dynamics">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../controllable-plugins/" class="btn btn-neutral" title="Controllable plugins"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2019-2020 LG Electronics Inc.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/lgsvl/simulator/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../controllable-plugins/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ego-vehicle-dynamics/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../javascripts/clipboard.js" defer></script>
      <script src="../javascripts/copy-to-clipboard.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
